{% extends 'AppCalendar/base.html' %}

{% block title %}
    Calendar
{% endblock title %}


{% block content %}
<div class="clearfix">
    <a class="btn btn-info right" href="{% url 'AppUser:dashboard' %}"> Home </a>
</div>

<table>
    <tr>
        <td style="vertical-align: top; width: 25%;">
            <div class="clearfix">
                <form method="post" action="{% url 'AppCalendar:import_file' %}" enctype="multipart/form-data">
                    {% csrf_token %}
                    <label for="csvFile">Upload CSV file:</label>
                    <input type="file" id="csvFile" name="csv_file" accept=".csv"><br>

                    <label for="icsFile">Upload ICS file</label>
                    <input type="file" id="icsFile" name="ics_file" accept=".ics"><br>
                    <button class="btn btn-info left" type="submit">Import</button>
                </form>
                
                <br> <br> <br>

                <div class="dropdown" style="display: inline-block;">
                    <button class="btn btn-info left dropdown-toggle" type="button" id="exportDropdown" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                        Export
                    </button>
                    <div class="dropdown-menu dropdown-menu-right" aria-labelledby="exportDropdown">
                        <form method="post" action="{% url 'AppCalendar:export' %}">
                            {% csrf_token %}
                            <input type="hidden" name="format" value="ics">
                            <button class="dropdown-item" type="submit">.ICS</button>
                        </form>
                        <form method="post" action="{% url 'AppCalendar:export' %}">
                            {% csrf_token %}
                            <input type="hidden" name="format" value="csv">
                            <button class="dropdown-item" type="submit">.CSV</button>
                        </form>
                    </div>
                </div>
            </div>
            
            <br>
            
            <div class="sidenav">
                <a class="btn btn-info right" style="background-color: #ffffff;" href="{% url 'AppCalendar:task_new' %}"> New Task </a>
                <h2>To-do List</h2>
                <hr style="height: 8px; background-color: #aaaaaa">
                {% for task in task_list %}
                    <b>Task Name: </b> {{ task.title }} <br>
                    <b>Start Time: </b> {{task.start_time}} <br>
                    <b>End Time: </b> {{task.end_time}} <br> <br>
                    <b>Description: </b> {{task.description}} <br>
                    <hr style="height: 1px; background-color: #000000">
                {% endfor %}
            </div>
        </td>

        <td>
            <div class="clearfix">
	            <a class="btn btn-info left" href="{% url 'AppCalendar:calendar' %}?{{ prev_month }}"> Previous Month </a>
	            <a class="btn btn-info right" href="{% url 'AppCalendar:calendar' %}?{{ next_month }}"> Next Month </a>
            </div>

            {{ calendar }}
        </td>
    </tr>
</table>

{% endblock content %}   


