<div id="weatherPopUp" class="popupWindow">
  <div class="popupWindow-content">
    <div class="popupWindow-header">
      <h2>Weather Alert</h2>
    </div>
    <div class="popupWindow-body">
      <p id="weatherAlertMessage"></p>
      <p>You may want to reschedule or delete this event due to weather conditions.</p>
    </div>
    <button id="closeWeatherPopUpBtn" class="closeWindowBtn">Close Window</button>
  </div>
</div>

{% include 'AppCalendar/weatherAlert.html' %}
<script>
document.addEventListener("DOMContentLoaded", function() {
  var openWeatherPopUpBtn = document.querySelector('.add-button'); // Adjust this selector as needed
  var closeWeatherPopUpBtn = document.getElementById('closeWeatherPopUpBtn');
  var rescheduleBtn = document.getElementById('rescheduleBtn');
  var deleteBtn = document.getElementById('deleteBtn');
  var weatherPopUp = document.getElementById('weatherPopUp');

  openWeatherPopUpBtn.addEventListener('click', function(event) {
    event.preventDefault();
    
    // Make a request to your weather API here
    // Example:
    // fetchWeather(eventLocation, eventDateTime);

    // After fetching weather data, determine if pop-up should be displayed
    var shouldDisplayPopUp = true; // Adjust this logic based on weather conditions

    if (shouldDisplayPopUp) {
      weatherPopUp.style.display = "block";
      // You can also update the message based on weather conditions
      document.getElementById('weatherAlertMessage').innerText = "Weather alert message goes here";
    }
  });

  closeWeatherPopUpBtn.addEventListener('click', function() {
    weatherPopUp.style.display = 'none';
  });

  rescheduleBtn.addEventListener('click', function() {
    // Perform reschedule action here, e.g., redirect to reschedule page
    alert("Event Has Been Rescheduled!");
    window.location.href = '{% url "AppCalendar/reschedule.html" %}';
  });

  deleteBtn.addEventListener('click', function() {
    // Perform delete action here, e.g., send delete request to server
    // and update calendar accordingly
    // You may also want to confirm the deletion with the user before proceeding
    // For simplicity, let's assume the deletion is confirmed and performed directly
    // Here, you would typically make an AJAX request to your server to delete the event
    // and update the calendar interface accordingly
    // Example:
    // deleteEvent(eventId);
    alert("Event Has Been deleted!");
    weatherPopUp.style.display = 'none'; // Close the pop-up after action
    window.location.href = '{% url "AppCalendar/task_delete.html" %}';
  });
});
</script>
